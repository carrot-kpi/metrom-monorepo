type Token @entity(immutable: true) {
    id: Bytes!
    name: String!
    symbol: String!
    decimals: BigInt!
}

type PoolToken @entity {
    id: Bytes!
    data: Token!
    tvl: BigInt!
}

type Pool @entity {
    id: Bytes!
    tokens: [PoolToken!]!
    fee: BigInt!
    liquidity: BigInt!
    positions: [Position!]! @derivedFrom(field: "pool")
}

type Position @entity {
    id: Bytes!
    owner: Bytes!
    liquidity: BigInt!
    pool: Pool!
    liquidityChanges: [LiquidityChange!]! @derivedFrom(field: "position")
}

type Block @entity(immutable: true) {
    id: Bytes!
    number: BigInt!
    timestamp: BigInt!
}

type Transaction @entity(immutable: true) {
    id: Bytes!
    block: Block!
}

type LiquidityChange @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    delta: BigInt!
    position: Position!
}

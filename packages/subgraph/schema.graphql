type Token @entity(immutable: true) {
    id: Bytes!
    symbol: String!
    name: String!
    decimals: BigInt!
}

type Transaction @entity(immutable: true) {
    id: Bytes!
    blockNumber: BigInt!
    timestamp: BigInt!
    initializeEvents: [InitializeEvent!]! @derivedFrom(field: "transaction")
    createCampaignEvents: [CreateCampaignEvent!]!
        @derivedFrom(field: "transaction")
    distributeRewardEvents: [DistributeRewardEvent!]!
        @derivedFrom(field: "transaction")
    claimRewardEvent: ClaimRewardEvent! @derivedFrom(field: "transaction")
    recoverRewardEvent: RecoverRewardEvent! @derivedFrom(field: "transaction")
    claimFee: ClaimFeeEvent! @derivedFrom(field: "transaction")
    transferCampaignOwnershipEvents: [TransferCampaignOwnershipEvent!]!
        @derivedFrom(field: "transaction")
    acceptCampaignOwnershipEvents: [AcceptCampaignOwnershipEvent!]!
        @derivedFrom(field: "transaction")
    transferOwnershipEvents: [TransferOwnershipEvent!]!
        @derivedFrom(field: "transaction")
    acceptOwnershipEvents: [AcceptOwnershipEvent!]!
        @derivedFrom(field: "transaction")
    setUpdaterEvents: [SetUpdaterEvent!]! @derivedFrom(field: "transaction")
    setGlobalFeeEvents: [SetGlobalFeeEvent!]! @derivedFrom(field: "transaction")
    setSpecificFeeEvents: [SetSpecificFeeEvent!]!
        @derivedFrom(field: "transaction")
    setMinimumCampaignDuration: [SetMinimumCampaignDurationEvent!]!
        @derivedFrom(field: "transaction")
    setMaximumCampaignDuration: [SetMaximumCampaignDurationEvent!]!
        @derivedFrom(field: "transaction")
}

type Metrom @entity {
    id: Bytes!
    transaction: Transaction!
    owner: Bytes!
    pendingOwner: Bytes!
    updater: Bytes!
    globalFee: BigInt!
    minimumCampaignDuration: BigInt!
    maximumCampaignDuration: BigInt!
    campaignsAmount: BigInt!

    claimableFees: [ClaimableFee!]! @derivedFrom(field: "metrom")
    specificFees: [SpecificFee!]! @derivedFrom(field: "metrom")
    campaigns: [Campaign!]! @derivedFrom(field: "metrom")

    initializeEvents: [InitializeEvent!]! @derivedFrom(field: "metrom")
    createCampaignEvents: [CreateCampaignEvent!]! @derivedFrom(field: "metrom")
    distributeRewardEvents: [DistributeRewardEvent!]!
        @derivedFrom(field: "metrom")
    claimRewardEvent: ClaimRewardEvent! @derivedFrom(field: "metrom")
    recoverRewardEvent: RecoverRewardEvent! @derivedFrom(field: "metrom")
    claimFee: ClaimFeeEvent! @derivedFrom(field: "metrom")
    transferCampaignOwnershipEvents: [TransferCampaignOwnershipEvent!]!
        @derivedFrom(field: "metrom")
    acceptCampaignOwnershipEvents: [AcceptCampaignOwnershipEvent!]!
        @derivedFrom(field: "metrom")
    transferOwnershipEvents: [TransferOwnershipEvent!]!
        @derivedFrom(field: "metrom")
    acceptOwnershipEvents: [AcceptOwnershipEvent!]!
        @derivedFrom(field: "metrom")
    setUpdaterEvents: [SetUpdaterEvent!]! @derivedFrom(field: "metrom")
    setGlobalFeeEvents: [SetGlobalFeeEvent!]! @derivedFrom(field: "metrom")
    setSpecificFeeEvents: [SetSpecificFeeEvent!]! @derivedFrom(field: "metrom")
    setMinimumCampaignDuration: [SetMinimumCampaignDurationEvent!]!
        @derivedFrom(field: "metrom")
    setMaximumCampaignDuration: [SetMaximumCampaignDurationEvent!]!
        @derivedFrom(field: "metrom")
}

type ClaimableFee @entity {
    id: Bytes!
    metrom: Metrom!
    token: Token!
    amount: BigInt!
}

type SpecificFee @entity {
    id: Bytes!
    metrom: Metrom!
    address: Bytes!
    fee: BigInt!
    none: Boolean!
}

type InitializeEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    owner: Bytes!
    updater: Bytes!
    globalFee: BigInt!
    minimumCampaignDuration: BigInt!
    maximumCampaignDuration: BigInt!
}

type CreateCampaignEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    owner: Bytes!
    chainId: BigInt!
    pool: Bytes!
    from: BigInt!
    to: BigInt!
    specification: Bytes!
    rewardTokens: [Bytes!]!
    rewardAmounts: [BigInt!]!
    feeAmounts: [BigInt!]!
}

type DistributeRewardEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    root: Bytes!
    data: Bytes!
}

type ClaimRewardEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    token: Token!
    amount: BigInt!
    receiver: Bytes!
}

type RecoverRewardEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    token: Token!
    amount: BigInt!
    receiver: Bytes!
}

type ClaimFeeEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    token: Token!
    amount: BigInt!
    receiver: Bytes!
}

type TransferCampaignOwnershipEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    owner: Bytes!
}

type AcceptCampaignOwnershipEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    campaign: Campaign!
    owner: Bytes!
}

type TransferOwnershipEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    owner: Bytes!
}

type AcceptOwnershipEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    owner: Bytes!
}

type SetUpdaterEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    updater: Bytes!
}

type SetGlobalFeeEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    globalFee: BigInt!
}

type SetSpecificFeeEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    address: Bytes!
    specificFee: BigInt!
}

type SetMinimumCampaignDurationEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    minimumCampaignDuration: BigInt!
}

type SetMaximumCampaignDurationEvent @entity(immutable: true) {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    maximumCampaignDuration: BigInt!
}

type Campaign @entity {
    id: Bytes!
    transaction: Transaction!
    metrom: Metrom!
    creationBlockNumber: BigInt!
    creationTimestamp: BigInt!
    owner: Bytes!
    pendingOwner: Bytes!
    chainId: BigInt!
    pool: Bytes!
    from: BigInt!
    to: BigInt!
    specification: Bytes!
    root: Bytes!
    data: Bytes!

    rewards: [Reward!]! @derivedFrom(field: "campaign")

    createEvent: CreateCampaignEvent! @derivedFrom(field: "campaign")
    transferOwnershipEvents: [TransferCampaignOwnershipEvent!]!
        @derivedFrom(field: "campaign")
    acceptOwnershipEvents: [AcceptCampaignOwnershipEvent!]!
        @derivedFrom(field: "campaign")
    distributeRewardEvents: [DistributeRewardEvent!]!
        @derivedFrom(field: "campaign")
    claimRewardEvents: [ClaimRewardEvent!]! @derivedFrom(field: "campaign")
    recoverRewardEvents: [RecoverRewardEvent!]! @derivedFrom(field: "campaign")
}

type Reward @entity {
    id: Bytes!
    campaign: Campaign!
    token: Token!
    amount: BigInt!
    unclaimed: BigInt!
}
